(this["webpackJsonpprefectures-population-transition"]=this["webpackJsonpprefectures-population-transition"]||[]).push([[0],{177:function(e,t,n){},179:function(e,t,n){},360:function(e,t,n){},362:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(1),c=n.n(a),u=n(55),o=n.n(u),s=(n(177),n(33)),i=n(10),p=n.n(i),f=n(30),j=n(18),l="1WAgEHBX1RahNCuFeYHOn8xVh9mnsQHaqjE2wcXs",d=function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://opendata.resas-portal.go.jp/api/v1/prefectures",e.next=3,fetch("https://opendata.resas-portal.go.jp/api/v1/prefectures",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded","X-API-KEY":l}});case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={prefCode:t.toString(),cityCode:"-"},r=new URLSearchParams(n),a="https://opendata.resas-portal.go.jp/api/v1/population/composition/perYear?".concat(r.toString()),e.next=5,fetch(a,{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded","X-API-KEY":l}});case 5:return c=e.sent,e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=n(41),O=n(39),v=(n(179),function(e){var t,n;if(0===e.prefectures.length)return Object(r.jsx)("p",{children:"Prefectures is nothing."});var c=Object(a.useState)(null===(t=e.prefectures)||void 0===t?void 0:t.map((function(e){return Object(O.a)({},e.prefCode,!1)})).reduce((function(e,t){return Object(h.a)(Object(h.a)({},e),t)}),{})),u=Object(j.a)(c,2),o=u[0],s=u[1],i=function(t){var n,r=t.target,a=Object(h.a)(Object(h.a)({},o),{},Object(O.a)({},r.value,r.checked));s(a);var c=Object.entries(a).filter((function(e){return Object(j.a)(e,2)[1]})).map((function(e){var t=Object(j.a)(e,1)[0];return Number(t)}));null===(n=e.onChange)||void 0===n||n.call(e,c)},p=null===(n=e.prefectures)||void 0===n?void 0:n.map((function(e){return Object(r.jsxs)("label",{className:"Prefecture-checkbox",children:[Object(r.jsx)("input",{type:"checkbox",onChange:i,value:e.prefCode,name:e.prefName}),Object(r.jsx)("span",{children:e.prefName})]},e.prefCode)}));return Object(r.jsx)("div",{className:"Prefecture-container",children:Object(r.jsx)("div",{className:"Prefecture-checkbox-container",children:p})})}),x=n(14),m=function(e){var t=e.graphData.reduce((function(e,t){return Object(s.a)(new Set([].concat(Object(s.a)(e),Object(s.a)(Object.keys(t).filter((function(e){return"\u5e74"!==e}))))))}),[]);return Object(r.jsx)("div",{className:"LineChart",style:e.style,"data-testid":"linegraph",children:Object(r.jsx)(x.e,{aspect:4/3,children:Object(r.jsxs)(x.d,{data:e.graphData,children:[Object(r.jsx)(x.a,{strokeDasharray:"3 3"}),Object(r.jsx)(x.g,{dataKey:"\u5e74"}),Object(r.jsx)(x.h,{}),Object(r.jsx)(x.f,{}),Object(r.jsx)(x.b,{}),t.map((function(e,t){return Object(r.jsx)(x.c,{type:"monotone",dataKey:e,stroke:g(t)},"series-".concat(e))}))]})})})},g=function(e){var t=e%7,n=60*(Math.floor(e/7)/7)+30;return"hsl(".concat(t%7*360/7,",100%,").concat(n,"%)")},w=(n(360),function(e,t){var n=t.map((function(e){return e.result.data})).map((function(e){return e.filter((function(e){return"\u7dcf\u4eba\u53e3"===e.label}))[0].data}));return Object(s.a)(new Set(n.flatMap((function(e){return e.map((function(e){return e.year}))})))).map((function(t){var r={"\u5e74":t};return n.forEach((function(n,a){var c,u=null===(c=n.find((function(e){return e.year===t})))||void 0===c?void 0:c.value;void 0!==u&&(r[e[a]]=u)})),r}))}),y=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],u=Object(a.useState)([]),o=Object(j.a)(u,2),s=o[0],i=o[1],l=Object(a.useState)(null),h=Object(j.a)(l,2),O=h[0],x=h[1],g=Object(a.useRef)(!0);Object(a.useEffect)((function(){return Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:if(t=e.sent,g.current&&"result"in t){e.next=5;break}return e.abrupt("return");case 5:c(null===t||void 0===t?void 0:t.result);case 6:case"end":return e.stop()}}),e)})))(),function(){g.current=!1}}),[]),Object(a.useEffect)((function(){Object(f.a)(p.a.mark((function e(){var t,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==s.length){e.next=3;break}return x(null),e.abrupt("return");case 3:return e.next=5,Promise.all(s.map((function(e){return b(e)})));case 5:t=e.sent,r=n.reduce((function(e,t){return e[t.prefCode]=t.prefName,e}),{}),a=s.map((function(e){return r[e]})),c=w(a,t),x(c);case 10:case"end":return e.stop()}}),e)})))()}),[s]);return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("header",{className:"App-header",children:Object(r.jsx)("h1",{children:"\u90fd\u9053\u5e9c\u770c\u5225\u7dcf\u4eba\u53e3\u63a8\u79fb\u30b0\u30e9\u30d5"})}),Object(r.jsx)(v,{prefectures:n,onChange:function(e){i(e)}}),Object(r.jsx)("div",{className:"App-graph-container",children:null!==O?Object(r.jsx)(m,{style:{width:"80%",height:"100%"},graphData:O}):null}),Object(r.jsx)("footer",{className:"App-footer",children:Object(r.jsx)("p",{children:"Prefecture Population Transition"})})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,364)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};n(361);o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root")),C()}},[[362,1,2]]]);
//# sourceMappingURL=main.bf72074c.chunk.js.map